---
import tileAdhesive from "../content/tile-adhesive-grout-cleaner-cc";
import MainLayout from "../layouts/MainLayout.astro";
import CheckIcon from "./CheckIcon.astro";
import { JSW_COLORS, FEATURE_ICONS, CATEGORIES } from "../utils/constants";
import SectionLayout from "../layouts/SectionLayout.astro";
import AnchorButton from "./AnchorButton.astro";
import DownloadIcon from "./DownloadIcon.astro";

const { data } = Astro.props;
const {
  title,
  description,
  image,
  benefits,
  packages,
  specificationsTable,
  features,
  category,
  relatedProducts,
} = data;
---

<MainLayout>
  <div
    style="height: 400px; background-image: url(/images/construction-chemicals/produdct-header.jpg)"
  >
  </div>
  <SectionLayout
    className="position-relative d-flex flex-column flex-md-row justify-content-between align-items-start mb-5 mt-0 mt-md-5"
  >
    <div
      class="image-container d-flex justify-content-start align-items-center"
    >
      <img src={image} alt={title} />
    </div>
    <!-- <div class="image-bg">
      <span></span>
    </div> -->
    <div class="content-container mt-5 ml-md-2 mt-md-0">
      <div class="d-flex justify-content-start align-items-center">
        <span
          style={`display:block; width:30px; height:2px; background:${JSW_COLORS.p1}`}
        ></span>
        <p
          class="mb-0 ml-2"
          style={`color:${JSW_COLORS.p1}; text-transform:uppercase;`}
        >
          {CATEGORIES[category]}
        </p>
      </div>
      <h1 style={`color:${JSW_COLORS.p2}; font-weight:700;`}>{title}</h1>
      <div class="mt-4 description">
        <h6 style="font-weight:700">DESCRIPTION</h6>
        <p class="mt-2">{description}</p>
        <hr />
      </div>
      <div class="mt-5">
        <h6 style="font-weight:700">FEATURES</h6>
        <div
          class="features-container d-flex flex-column flex-sm-row justify-content-between align-items-center mt-3"
        >
          {
            features.map((feature) => (
              <div class="text-center feature-item">
                <img src={FEATURE_ICONS[feature]} />
                <p class="mt-2">{feature}</p>
              </div>
            ))
          }
        </div>
      </div>
      <div class="mt-5 d-flex justify-content-start align-items-center">
        <h6 style="font-weight:700">PACK SIZE:</h6>
        {
          packages.map((pack) => (
            <span
              class="d-inline-block ml-3 rounded text-white"
              style={`background-color:${JSW_COLORS.p2}; padding: 2px 0.5rem`}
            >
              {pack}
            </span>
          ))
        }
      </div>
      <hr />
      <div class="benefits mt-4">
        <h6 style="font-weight:700">{benefits.length} BENEFITS</h6>
        <ul class="mt-3">
          {
            benefits.map((benefit) => (
              <li class="my-3 d-flex justify-content-start align-items-start">
                <CheckIcon className="d-block" />
                <span class="ml-2">{benefit}</span>
              </li>
            ))
          }
        </ul>
      </div>
      <hr />
      <div class="technical-specifications mt-4">
        <h6 style="font-weight:700">TECHNICAL SPECIFICATIONS</h6>
        <div class="table-container mt-3">
          <table>
            <tr>
              <th class="property-tab">Property</th>
              <th>What's Included</th>
            </tr>
            {
              specificationsTable.map((spec) => (
                <tr>
                  <td class="property-tab">{spec.property}</td>
                  <td>{spec.result}</td>
                </tr>
              ))
            }
          </table>
        </div>
      </div>
      <div class="d-flex justify-content-start mt-5 py-1">
        <AnchorButton
          style={`border-color:${JSW_COLORS.p2} !important; color:${JSW_COLORS.p2}`}
          className="border"
        >
          Technical Data Sheet
          <DownloadIcon className="ml-3" />
        </AnchorButton>
        <AnchorButton
          style={`border-color:${JSW_COLORS.p2} !important; color:${JSW_COLORS.p2}`}
          className="border ml-3"
        >
          Download Leaflet
          <DownloadIcon className="ml-3" />
        </AnchorButton>
      </div>
    </div>
  </SectionLayout>
</MainLayout>
<SectionLayout style="margin-top: 150px; margin-bottom: 50px;">
  <h1
    style={{
      fontWeight: "bold",
      textAlign: "center",
    }}
  >
    Other Product Ranges
  </h1>
  <div class="d-flex flex-wrap justify-content-between align-items-center mt-5">
    {
      relatedProducts.map((product) => {
        return (
          <a
            href={product.link}
            style={{
              textDecoration: "none",
              color: JSW_COLORS.p2,
              position: "relative",
              padding: "1rem",
              cursor: "pointer",
            }}
            class="d-flex flex-column align-items-center justify-content-center"
          >
            <img
              src={product.image}
              alt={product.title}
              style="max-width:100%"
            />
            <p style="font-size: 1.5rem;" class="fw-bold mt-4">
              {product.title}
            </p>
          </a>
        );
      })
    }
  </div>
</SectionLayout>

<style>
  .image-container {
    position: sticky;
    top: 2rem;
    min-width: 500px;
    height: 600px;
    border-radius: 0 2rem 2rem 0;
    padding: 2rem;
    padding-left: 0;
    z-index: 1;
  }

  .image-container::before {
    content: "";
    position: absolute;
    top: 0;
    left: calc(calc(100vw - min(100%, 1360px) + 1rem) * -1);
    width: 100vw;
    height: 100%;
    background: #e8edf5;
    border-radius: 0 2rem 2rem 0;
    z-index: -1;
  }
  .image-container img {
    max-width: 100%;
    max-height: 100%;
    height: 100%;
    object-fit: contain;
    z-index: 1;
  }
  .content-container {
    padding: 0 1rem;
    overflow-y: auto;
    width: calc(100% - 500px);
  }

  .content-container p {
    color: #414141;
  }

  .content-container .description p {
    /* max-width: 70%; */
  }

  .benefits ul {
    list-style: none;
    padding: 0;
    max-width: 80%;
  }

  .features-container {
    border: 1px solid #17479e33;
    border-radius: 1.25rem;
    padding: 1rem 2rem;
    max-width: 600px;
    flex-wrap: wrap;
  }
  .features-container > div {
    flex: 1;
    min-width: 100px;
  }

  .features-container > div:not(:last-child) {
    border-right: 1px solid #17479e33;
  }

  .technical-specifications table {
    width: 100%;
    border-collapse: collapse;
  }

  .technical-specifications .table-container {
    overflow-x: auto;
    border: 1px solid #d9d9d9;
    border-radius: 2rem;
  }

  .technical-specifications table th,
  .technical-specifications table td {
    border-bottom: 1px solid #d9d9d9;
    padding: 1.5rem;
  }

  .technical-specifications table th {
    background-color: #17479e1a;
    font-weight: 700;
  }

  .technical-specifications table td {
    width: 50%;
  }

  .property-tab {
    border-right: 1px solid #d9d9d9;
  }

  @media screen and (max-width: 1100px) {
    .image-container {
      height: 450px;
      min-width: 450px;
    }
    .content-container {
      width: calc(100% - 450px);
    }
  }
  @media screen and (max-width: 768px) {
    .image-container {
      position: relative;
      height: 300px;
      min-width: 300px;
      width: 100%;
      border-radius: 0;
      top: 0;
    }
    .content-container .description p {
      max-width: 100%;
    }
    .benefits ul {
      max-width: 100%;
    }
    .image-container::before {
      left: -15px;
      border-radius: 0;
    }
    .content-container {
      width: 100%;
    }
    .features-container > div:not(:last-child) {
      border: none;
    }
  }
</style>
